mariadb_version: "10.4"
mariadb_root_password: "123456"
mariadb_remote: "True"
nodejs_version: "12"

mariadb_configuration_default:
  - name: default-storage-engine
    value: InnoDB
  - name: character-set-client-handshake
    value: FALSE
  - name: character-set-server
    value: utf8mb4
  - name: collation-server
    value: utf8mb4_unicode_ci

# docker
docker_applications: 
  - phpmyadmin

# init passsword of database
init_db: 
  mariadb:
    admin: root
    users: ["erpnext"]
    password: "123456"
    config_paths:
      - /data/wwwroot/frappe-bench/sites/erpnext/site_config.json

init_application:
  erpnext:
    username: Administrator
    password: admin
    commands: 
      - sudo -H -u erpnext bash -c "cd /data/wwwroot/frappe-bench && export GIT_PYTHON_REFRESH=quiet && bench new-site --db-name erpnext --db-password $new_password --db-type mariadb --mariadb-root-password $new_password --admin-password $new_password --force"
      - echo "drop user erpnext@'127.0.0.1';" |mysql -uroot -p$new_password
      - echo "REVOKE ALL PRIVILEGES ON *.* FROM 'erpnext'@'%';GRANT USAGE ON *.* TO 'erpnext'@'%' ;" |mysql -uroot -p$new_password
